# 체스 요구사항

<br>

## 기능 명세

<br>

- [ ] 게임 시작 및 종료 입력 기능
    - [ ] start 게임 시작
    - [ ] end 게임 종료
- [ ] 체스판 초기화 기능
- [ ] 체스판 View에 보낼 수 있도록 DTO 생성 기능
- [ ] 체스 말 이동 기능 구현
    - [ ] 예외: 보드를 나가는 경우
    - [ ] 예외: 자신의 이동 전략을 벗어나는 경우
    - [ ] 예외: 가는 길에 다른 말들이 있는 경우
    - [ ] 예외: 현재 위치로 이동 불가
    - [ ] 예외: 목적지에 아군이 있는 경우

<br>

## 이동 로직 정리
0. 초기에 거를 수 있는 예외
- 예외: from 과 to가 같다면
- 예외: from 과 to가 범위 내가 아니다.
1. from에 말이 있는지 찾는다. (pieces.find(from))
    - 예외: from에 말이 없다.
    - 예외: 내 말이 아니다.
2. from 에 있는 말에게 piece.isMovable(to) 같은 메서드를 실행시켜서 true, false 를 받는다.
    - 예외: to에 갈 수 없다.
3. 나이트 인지 아닌지 체크한다
    - 나이트가 아니라면 경로를 체크해야 한다.
        - 나이트를 제외한 말들은 직선으로 이동한다. pieces.isNothingInPath(from, to) 을 하여 true false를 반환한다.
            - 예외: 경로에 무언가 있다.
            - 경로에 아무 것도 없으면 4번으로 이동한다.
    - 나이트 라면 4번으로 이동한다.
        - 4번으로 이동한다.
4. to에 무언가가 있는지 체크한다.
    - 예외: 같은 색의 피스가 있다.
    - 폰인지 아닌지 체크한다.
        - 폰일 때 to에 무언가가 있는지 체크
            - 다른색의 피스가 있고 && 대각으로 이동하는 경우 (공격 이동)
            - 피스가 없고 && 직선으로 이동하는 경우 (단순 이동)
        - 폰이 아닐 때 아무것도 없거나 다른색이 있는 것이므로 5번으로 간다
5. 이동하기 전 현재 체크 상황인지 판단한다. 적의 살아있는 piece를 대상으로 나의 킹의 위치를 to로 1~4상황을 반복하면 될 듯
    - 현재 체크이다.
        - 예외: 움직이려는 위치로 움직여도 체크이다.
        - 움직인 이후의 위치를 to로 하여 체크가 아니어야 움직일 수 있다. 6번으로 간다.
    - 체크가 아니면 6번으로 간다.
6. 움직인다.
7. 상대가 체크메이트인지 판단을 한다.
    - 상대의 킹의 위치를 찾아 킹이 갈 수 있는 모든 위치가 체크인지 판단
